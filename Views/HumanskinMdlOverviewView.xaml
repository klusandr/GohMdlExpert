<bv:BaseView x:Class="GohMdlExpert.Views.HumanskinMdlOverviewView"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
    xmlns:local="clr-namespace:GohMdlExpert.Views"
    xmlns:bv="clr-namespace:WpfMvvm.Views;assembly=WpfMvvm" 
    xmlns:vm="clr-namespace:GohMdlExpert.ViewModels" 
    xmlns:goh="clr-namespace:GohMdlExpert.Models.GatesOfHell.Media3D" 
    xmlns:modelstree="clr-namespace:GohMdlExpert.Views.ModelsTree"
    d:DataContext="{d:DesignInstance Type=vm:HumanskinMdlOverviewViewModel}"
    mc:Ignorable="d" 
    d:DesignHeight="450" d:DesignWidth="800">
    <bv:BaseView.Resources>
        <goh:PlyModel3DToModel3DConverter x:Key="PlyModel3DToModel3DConverter"/>
    </bv:BaseView.Resources>
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition/>
            <RowDefinition Height="auto"/>
        </Grid.RowDefinitions>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width=".3*"/>
            <ColumnDefinition/>
            <ColumnDefinition Width=".3*"/>
        </Grid.ColumnDefinitions>

        <Grid Margin="5">
            <Grid.RowDefinitions>
                <RowDefinition MinHeight="50"/>
                <RowDefinition Height="auto"/>
                <RowDefinition Height=".3*" MinHeight="40"/>
            </Grid.RowDefinitions>
            <modelstree:ModelsLoadTreeView DataContext="{Binding ModelsLoadTreeViewModel}"/>
            <GridSplitter Height="3" Grid.Row="1" HorizontalAlignment="Stretch" VerticalAlignment="Center"/>
            <local:PlyModelAdderView Grid.Row="2" DataContext="{Binding ModelAdderViewModel}"/>
        </Grid>

        <Grid x:Name="_sceneBackground" Background="AliceBlue" MouseWheel="OnMouseWheel" Grid.Column="1">
            <Viewport3D x:Name="_scene">
                <Viewport3D.Camera>
                    <PerspectiveCamera x:Name="_perspectivCamera"/>
                </Viewport3D.Camera>

                <Viewport3D.Children>
                    <ModelVisual3D>
                        <ModelVisual3D.Content>
                            <DirectionalLight Color="White" Direction="-1,-1,-2" />
                        </ModelVisual3D.Content>
                    </ModelVisual3D>
                    <ModelVisual3D>
                        <ModelVisual3D.Content>
                            <Model3DGroup Children="{Binding Models, Mode=OneWay}"/>
                        </ModelVisual3D.Content>
                    </ModelVisual3D>
                    <ModelVisual3D x:Name="_addedModel" Content="{Binding ModelAdderViewModel.AddedModel, Converter={StaticResource PlyModel3DToModel3DConverter}}"/>
                </Viewport3D.Children>
            </Viewport3D>
        </Grid>
        <StackPanel Grid.Row="1" Orientation="Horizontal">
            <StackPanel Orientation="Horizontal" DataContext="{Binding ElementName=_perspectivCamera}" Background="White">
                <StackPanel.Resources>
                    <Style TargetType="TextBlock">
                        <Setter Property="VerticalAlignment" Value="Center"/>
                        <Setter Property="Margin" Value="10 0"/>
                    </Style>
                </StackPanel.Resources>
                <TextBlock Text="{Binding Position.X, StringFormat = X : {0}.00}"/>
                <TextBlock Text="{Binding Position.Y, StringFormat = Y : {0}.00}"/>
                <TextBlock Text="{Binding Position.Z, StringFormat = Z : {0}.00}"/>
            </StackPanel>
        </StackPanel>
        <DockPanel Grid.Column="2">
            <Button Content="Create new humanskin" Command="{Binding NewMdlCommand}" Padding="5 3" HorizontalAlignment="Center" VerticalAlignment="Center" DockPanel.Dock="Top"/>
            <Button Content="Save humanskin" Padding="5 3" HorizontalAlignment="Center" VerticalAlignment="Center" Command="{Binding SaveMdlCommand}" DockPanel.Dock="Bottom"/>
            <modelstree:ModelsOverviewTreeView Margin="5" DataContext="{Binding ModelsOverviewTreeViewModel}" DockPanel.Dock="Left"/>
        </DockPanel>
    </Grid>
    
    
</bv:BaseView>
